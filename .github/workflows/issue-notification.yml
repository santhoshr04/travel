name: GitHub Issues to Discord

on:
  issues:
    types: [opened]

jobs:
  send-discord-notification:
    runs-on: ubuntu-latest
    steps:
      - name: Send Issue Notification to Discord
        run: |
          curl -H "Content-Type: application/json" \
               -X POST \
               -d '{
                 "username": "GitHub Bot",
                 "avatar_url": "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",
                 "embeds": [
                   {
                     "title": "🆕 New GitHub Issue Created",
                     "url": "${{ github.event.issue.html_url }}",
                     "color": 16711680,
                     "fields": [
                       {
                         "name": "📌 Issue Title",
                         "value": "**${{ github.event.issue.title }}**",
                         "inline": false
                       },
                       {
                         "name": "📜 Description",
                         "value": "${{ github.event.issue.body }}",
                         "inline": false
                       },
                       {
                         "name": "🔗 View Issue",
                         "value": "[Click here](${{ github.event.issue.html_url }})",
                         "inline": false
                       },
                       {
                         "name": "👤 Author",
                         "value": "${{ github.event.issue.user.login }}",
                         "inline": true
                       },
                       {
                         "name": "🏷 Labels",
                         "value": "${{ join(github.event.issue.labels.*.name, ', ') }}",
                         "inline": true
                       }
                     ],
                     "footer": {
                       "text": "GitHub Issues Tracker",
                       "icon_url": "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
                     },
                     "timestamp": "${{ github.event.issue.created_at }}"
                   }
                 ]
               }' ${{ secrets.DISCORD_WEBHOOK }}
